---
import { getCollection } from 'astro:content';
import Base from '../layouts/Base.astro';

const tools = await getCollection('tools');

// Group by category
const categories = tools.reduce((acc, tool) => {
  const cat = tool.data.category;
  if (!acc[cat]) acc[cat] = [];
  acc[cat].push(tool);
  return acc;
}, {} as Record<string, typeof tools>);
---

<Base title="Free Tools">
  <p class="intro">I'm Nick Ralston, a Partner at <a href="https://www.saif.vc">SAIF</a> where we fund startups building AI safety tools. These are side projects I've vibecoded â€” use them however you want.</p>

  {Object.entries(categories).map(([category, categoryTools]) => (
    <section>
      <h2>{category}</h2>
      <ul class="tool-list">
        {categoryTools.map((tool) => (
          <li>
            <a href={`/tools/${tool.id}`} class="tool-link">
              {tool.data.image && (
                <img src={tool.data.image} alt={tool.data.name} class="tool-image" />
              )}
              <div class="tool-info">
                <span class="tool-name">{tool.data.name}</span>
                <span class="tool-desc">{tool.data.description}</span>
              </div>
            </a>
          </li>
        ))}
      </ul>
    </section>
  ))}
</Base>

<style>
  .intro {
    color: var(--text-muted);
    margin-bottom: 2rem;
  }

  section {
    margin-bottom: 2rem;
  }

  .tool-list {
    list-style: none;
    padding: 0;
  }

  .tool-list li {
    margin-bottom: 0.75rem;
  }

  .tool-link {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border: 1px solid var(--border);
    border-radius: 8px;
    text-decoration: none;
    transition: border-color 0.15s;
  }

  .tool-link:hover {
    border-color: var(--accent);
    text-decoration: none;
  }

  .tool-image {
    width: 48px;
    height: 48px;
    flex-shrink: 0;
  }

  .tool-info {
    flex: 1;
  }

  .tool-name {
    display: block;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 0.25rem;
  }

  .tool-desc {
    display: block;
    font-size: 0.875rem;
    color: var(--text-muted);
  }
</style>
